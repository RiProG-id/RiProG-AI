. /data/adb/modules/RiProG/gamelist.prop
if [[ $(for game in $game1 $game2 $game3 $game4 $game5 $game6 $game7 $game8 $game9 $game10 $game11 $game12 $game13 $game14 $game15 $game16 $game17 $game18 $game19 $game20 $game21 $game22 $game23 $game24 $game25 skynet; do dumpsys window | grep -E 'mCurrentFocus|mFocusedApp' | grep "$game"; done) ]] 
then
[[ ! $(resetprop tweak.detect.mode) = game ]] && (resetprop -n tweak.detect.mode game)
elif [[ ! $(dumpsys input_method | grep mInteractive=true) == *"mInteractive"* ]]
then
[[ ! $(resetprop tweak.detect.mode) = sleep ]] && (resetprop -n tweak.detect.mode sleep)
else
[[ ! $(resetprop tweak.detect.mode) = daily ]] && (resetprop -n tweak.detect.mode daily)
fi

[[ $(resetprop tweak.detect.mode) = daily ]] && [[ ! $(resetprop tweak.apply.mode) = daily ]] && (
[[ -f /data/adb/modules/RiProG/feature/ai/lmk ]] && (echo "2560,5120,7680,8960,10240,12800" > /sys/module/lowmemorykiller/parameters/minfree)
[[ -f /data/adb/modules/RiProG/feature/ai/cpufreq ]] && (
for cpu in /sys/devices/system/cpu/cpufreq/policy*; do
    cat "$cpu"/cpuinfo_min_freq > "$cpu"/scaling_min_freq
done
)
[[ -f /data/adb/modules/RiProG/feature/ai/halfcore ]] && (
echo "1" > /sys/devices/system/cpu/cpu2/online
echo "1" > /sys/devices/system/cpu/cpu3/online
echo "1" > /sys/devices/system/cpu/cpu6/online
echo "1" > /sys/devices/system/cpu/cpu7/online
)
[[ -f /data/adb/modules/RiProG/feature/ai/powersave ]] && (settings put global low_power 0)
[[ -f /data/adb/modules/RiProG/feature/ai/notification ]] && (su -lp 2000 -c "cmd notification post -S bigtext -t 'RiProG AI: ( Daily Mode )' 'Tag' ''")
resetprop -n tweak.apply.mode daily
)

[[ $(resetprop tweak.detect.mode) = game ]] && [[ ! $(resetprop tweak.apply.mode) = game ]] && (
[[ -f /data/adb/modules/RiProG/feature/ai/lmk ]] && (echo "2560,5120,11520,25600,35840,38400" > /sys/module/lowmemorykiller/parameters/minfree)
[[ -f /data/adb/modules/RiProG/feature/ai/cpufreq ]] && (
for cpu in /sys/devices/system/cpu/cpufreq/policy*; do
    cat "$cpu"/cpuinfo_max_freq > "$cpu"/scaling_min_freq
done
)
[[ -f /data/adb/modules/RiProG/feature/ai/halfcore ]] && (
echo "1" > /sys/devices/system/cpu/cpu2/online
echo "1" > /sys/devices/system/cpu/cpu3/online
echo "1" > /sys/devices/system/cpu/cpu6/online
echo "1" > /sys/devices/system/cpu/cpu7/online
)
[[ -f /data/adb/modules/RiProG/feature/ai/powersave ]] && (settings put global low_power 0)
if [[ $(pgrep -fl "skynet") ]]
then
[[ -f /data/adb/modules/RiProG/feature/ai/notification ]] && (su -lp 2000 -c "cmd notification post -S bigtext -t 'RiProG AI: ( Game Mode ) (Test)' 'Tag' ''")
else
[[ -f /data/adb/modules/RiProG/feature/ai/notification ]] && (su -lp 2000 -c "cmd notification post -S bigtext -t 'RiProG AI: ( Game Mode )' 'Tag' ''")
fi
resetprop -n tweak.apply.mode game
)
[[ $(resetprop tweak.detect.mode) = sleep ]] && [[ ! $(resetprop tweak.apply.mode) = sleep ]] && (
[[ -f /data/adb/modules/RiProG/feature/ai/lmk ]] && (echo "2560,5120,7680,8960,10240,12800" > /sys/module/lowmemorykiller/parameters/minfree)
[[ -f /data/adb/modules/RiProG/feature/ai/cpufreq ]] && (
for cpu in /sys/devices/system/cpu/cpufreq/policy*; do
    cat "$cpu"/cpuinfo_min_freq > "$cpu"/scaling_min_freq
done
)
[[ -f /data/adb/modules/RiProG/feature/ai/halfcore ]] && (
echo "0" > /sys/devices/system/cpu/cpu2/online
echo "0" > /sys/devices/system/cpu/cpu3/online
echo "0" > /sys/devices/system/cpu/cpu6/online
echo "0" > /sys/devices/system/cpu/cpu7/online
)
[[ -f /data/adb/modules/RiProG/feature/ai/powersave ]] && (settings put global low_power 1)
[[ -f /data/adb/modules/RiProG/feature/ai/notification ]] && (su -lp 2000 -c "cmd notification post -S bigtext -t 'RiProG AI: ( Sleep Mode )' 'Tag' ''")
resetprop tweak.apply.mode sleep
)
sleep 10
nohup /data/adb/modules/RiProG/ai
exit